<mat-card class="lista-card">
  <div class="card-header">
    <h2>Policiais Militares Cadastrados</h2>
    <div class="header-actions">
      <button mat-stroked-button color="primary" class="btn-atualizar" (click)="carregar()" [disabled]="loading" aria-label="Atualizar lista">
        <mat-icon class="icon-left">refresh</mat-icon>
        <span>Atualizar</span>
      </button>
    </div>
  </div>
  <div class="filtros">
    <div class="filter-row">
      <label class="field-label">Filtrar por CPF</label>
      <mat-form-field appearance="outline" class="field">
        <mat-icon matPrefix>account_circle</mat-icon>
        <input matInput [formControl]="filtroCpf" maxlength="14" placeholder="">
      </mat-form-field>
    </div>

    <div class="filter-row">
      <label class="field-label">Filtrar por RG</label>
      <mat-form-field appearance="outline" class="field">
        <mat-icon matPrefix>badge</mat-icon>
        <input matInput [formControl]="filtroRg" maxlength="20" placeholder="">
      </mat-form-field>
    </div>

    <div class="actions"></div>
  </div>
  <div *ngIf="loading" class="loading">Carregando...</div>

  <div class="card-grid" *ngIf="!loading && filtrados.length">
    <mat-card class="policial-card" *ngFor="let p of filtrados" role="article">
      <div class="card-top">
        <div class="policial-title">Matr√≠cula: <strong>{{ p.matricula || '-' }}</strong></div>
        <div class="card-actions">
          <button mat-icon-button aria-label="Editar" title="Editar" (click)="editar(p)">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button color="warn" aria-label="Remover" title="Remover" (click)="confirmarRemover(p)" [disabled]="removendoId === p.id">
            <mat-icon *ngIf="removendoId !== p.id">delete</mat-icon>
            <mat-progress-spinner *ngIf="removendoId === p.id" diameter="20" mode="indeterminate"></mat-progress-spinner>
          </button>
        </div>
      </div>

      <div class="card-body">
        <div class="field"><span class="label">RG Civil</span><span class="value">{{ p.rg_civil }}</span></div>
        <div class="field"><span class="label">RG Militar</span><span class="value">{{ p.rg_militar }}</span></div>
        <div class="field"><span class="label">CPF</span><span class="value">{{ p.cpf }}</span></div>
        <div class="field"><span class="label">Nascimento</span><span class="value">{{ p.data_nascimento | date:'dd/MM/yyyy' }}</span></div>
      </div>
    </mat-card>
  </div>

  <div *ngIf="!loading && !filtrados.length" class="nenhum">Nenhum policial encontrado.</div>
</mat-card>
